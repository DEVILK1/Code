```c++
#include<iostream>
#include<cstdio>
#include<algorithm>
using namespace std;

const int MAXN = 100000 + 1;
int n, m, bin[MAXN][31], max_len;
int ans, sum, t;
char op[5];

void change(int x, int num) {
	int cnt = 0;
	while(x) {
		bin[num][++cnt] = x % 2;
		x >>= 1;
	}
	max_len = max(max_len, cnt);
}
int judge(char s[]) {
	if(s[0] == 'A') return 1;
	if(s[0] == 'O') return 2;
	return 3;
}
bool check(int x, int y) {
	for(int i = 1; i <= n; i++) {
		if(bin[i][0] == 1) x &= bin[i][y];
		else if(bin[i][0] == 2) x |= bin[i][y];
		else x ^= bin[i][y];
	}
	return x;
}
int main() {
	scanf("%d%d", &n, &m);
	for(int i = 1; i <= n; i++) {
		scanf("%s%d", op, &t);
		change(t, i);
		bin[i][0] = judge(op);
	}
	for(int i = max_len; i >= 1; i--) {
		if(check(0, i)) ans += (1 << (i - 1));
		else if(check(1, i) && sum + (1 << (i - 1)) <= m) {
			ans += (1 << (i - 1));
			sum += (1 << (i - 1));
		}
	}
	printf("%d\n", ans);
}
```
